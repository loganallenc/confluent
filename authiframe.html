<html>
  <head>
    <style>
    body {
      background: #F3F3F3;
      color:#FFF;
      font-size:400%;
      text-align:center;
      overflow:hidden;
    }
    a {
      text-decoration:none;
      color:#FFF;
    }
    a:visited {
      color:#FFF;
    }
    a:active{
      color:#FFF;
    }
    a:hover {
      color:#FFF;
    }
    #div-button {
        margin: 5px;
        padding: 5px 6px 4px 6px;
        background: #0d6289;
        border: solid 1px #D9D9D9;
        border-radius: 3px;
    }
    </style>
  </head>
  <body>
    <div id="div-button">
        <a href='#' id='authorize-button' onclick='handleAuthClick();'>Login</a>
    </div>
    <p style="visibility:hidden;" id="tokenValue"></p>
    
    <script>
var clientId = '464168127252.apps.googleusercontent.com';
var apiKey = 'AIzaSyAy7JAsd5JlzjTR_fkkarby9N1c3YkhY6o';
var scopes = 'https://www.googleapis.com/auth/calendar';
var checked = false;

function handleClientLoad() {
  gapi.client.setApiKey(apiKey);
  checkAuth();
}

function checkAuth() {
  gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
}

function handleAuthResult(authResult) {
  var authorizeButton = document.getElementById('authorize-button');
  if (authResult) {
    authorizeButton.style.visibility = 'hidden';
    callForToken();
  } else {
    authorizeButton.style.visibility = '';
    authorizeButton.onclick = handleAuthClick;
   }
}

function handleAuthClick(event) {
  gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
  return false;
}

function callForToken() {
  var tokenVal = gapi.auth.getToken();
  var redirect = "app.html?auth=" + encodeURIComponent(tokenVal['access_token']);
  window.location.href = redirect;
}
    </script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
  </body>
</html>